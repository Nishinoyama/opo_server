<header>
  <h1>
    OpoServerWeb
  </h1>
</header>

<section>
  <h2>
    <%= @tournament.name %>
  </h2>
  <h3>
    Participants
  </h3>
  <ul>
    <% @players.each do |p| %>
      <li>
        <div style="width: 240px; overflow: hidden; display: inline-flex;">
          <%= p.name %>
          <%= link_to "[show]", p %>
        </div>
        <% @matchings.select{|m| m.player_id == p.id}.map(&:matching_result).each do |m| %>
          <div style="display: inline-block; background-color:
            <%= "#c0efd3" if m.win_count > m.lose_count %>
            <%= "#eec3c4" if m.win_count < m.lose_count %>
            <%= "#f3e9cc" if m.win_count == m.lose_count %>
            ;">
            <%# OMG! call sql each time!!! SSSHHHIIITTT!!!%>
            <div style="display: inline; float: left; min-width: 60px; padding-right: 12px;">
              <%= "O" if m.win_count > m.lose_count %>
              <%= "X" if m.win_count < m.lose_count %>
              <%= "-" if m.win_count == m.lose_count %>
              <%= m.player_id %>
            </div>
            <div style="display: inline; margin-right: auto;">
              <%= m.win_count %>
              -
              <%= m.draw_count %>
              -
              <%= m.lose_count %>
            </div>
          </div>
        <% end %>
      </li>
    <% end %>
  </ul>
</section>
